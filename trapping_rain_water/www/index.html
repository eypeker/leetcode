<!DOCTYPE html>
<html>

    <head>
        <title>Trapping Rain Water</title>
        <link rel="stylesheet" href="style.css">

        <script type="module">
            import trapping_rain_water,{water_levels, sum_list} from "./trapping_rain_water.js";
            const preferredblocksize=50;

            function get_rows_cols(){
                return {columns: window.innerWidth / preferredblocksize,
                         rows: window.innerHeight / preferredblocksize}
            }

            function gen_elevation(columns, rows){
                return Array.from({length:columns}, () => Math.floor(Math.random() * rows));
            }

            run_application();

            async function run_application() {
                let wasm = await trapping_rain_water();;
                const {columns, rows} = get_rows_cols();
                const elevation = gen_elevation(columns,rows);
                const arr = Uint32Array.from(elevation);
                const res = water_levels(arr);
                console.log("Main: " + elevation);
                console.log("Result: " + res);


                const sum = sum_list(res);
            }
        </script>
    </head>

    <body>
        <div id="grid">


        </div>

    </body>

</html>